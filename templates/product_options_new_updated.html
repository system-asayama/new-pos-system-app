{% extends "base.html" %}

{% block content %}
<div style="margin-bottom:16px;">
  <a href="{{ url_for('admin_product_options') }}" class="btn sub">← 一覧に戻る</a>
</div>

<div class="card">
  <h2>商品オプション新規作成</h2>
  
  <form method="post">
    <label>オプション名 <span style="color:var(--danger);">*</span></label>
    <input type="text" name="option_name" placeholder="例: 割り方、トッピング" required>

    <label>適用商品 <span style="color:var(--danger);">*</span></label>
    <div style="max-height:300px; overflow-y:auto; border:1px solid var(--border); border-radius:6px; padding:12px; background:var(--sub);">
      {% if products %}
      {% for product in products %}
      <label style="display:block; padding:8px; cursor:pointer; border-radius:4px; transition:background 0.2s;" 
             onmouseover="this.style.background='#f3f4f6'" 
             onmouseout="this.style.background='transparent'">
        <input type="checkbox" name="product_ids" value="{{ product.id }}" style="width:auto; margin-right:8px;">
        {{ product.name }}
        <span style="color:var(--muted); font-size:12px;">(¥{{ product.price }})</span>
      </label>
      {% endfor %}
      {% else %}
      <p style="color:var(--muted); text-align:center; padding:20px 0;">商品が登録されていません。</p>
      {% endif %}
    </div>
    <p class="small" style="color:var(--muted); margin-top:8px;">
      💡 複数の商品を選択できます。選択した商品すべてにこのオプションが適用されます。
    </p>

    <label>表示順</label>
    <input type="number" name="display_order" value="0" min="0">

    <label>
      <input type="checkbox" name="required" value="1" style="width:auto; margin-right:8px;">
      必須選択にする
    </label>

    <label>
      <input type="checkbox" name="multiple" value="1" style="width:auto; margin-right:8px;">
      複数選択を許可する
    </label>

    <label>
      <input type="checkbox" name="active" value="1" checked style="width:auto; margin-right:8px;">
      有効にする
    </label>

    <div style="margin-top:24px;">
      <button type="submit" class="btn">作成</button>
    </div>
  </form>
</div>

<!-- 使用例 -->
<div class="card" style="margin-top:16px;">
  <h3 style="font-size:16px; margin:0 0 12px;">💡 使用例</h3>
  <p style="font-size:14px; color:var(--muted); line-height:1.6;">
    <strong>例1: 焼酎・梅酒の割り方</strong><br>
    オプション名: 「割り方」<br>
    適用商品: 焼酎A、焼酎B、梅酒C を選択<br>
    選択肢: 水割り、お湯割り、ロック、ストレート、ソーダ割り（+50円）
  </p>
  <p style="font-size:14px; color:var(--muted); line-height:1.6; margin-top:12px;">
    <strong>例2: ラーメンのトッピング</strong><br>
    オプション名: 「トッピング」<br>
    適用商品: 醤油ラーメン、味噌ラーメン、塩ラーメン を選択<br>
    選択肢: チャーシュー（+200円）、煮卵（+100円）、メンマ（+50円）<br>
    ※「複数選択を許可する」にチェック
  </p>
</div>
{% endblock %}

