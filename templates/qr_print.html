{% extends "base.html" %}
{% block content %}

{% if error %}
  <div class="card">
    <h3>QR印刷</h3>
    <p style="color:var(--danger)">{{ error }}</p>
    <a class="btn" href="{{ url_for('floor') }}">フロアに戻る</a>
  </div>
{% else %}
  <div class="card" style="text-align:center">
    <h2>テーブル {{ table_no }}</h2>

    {% if qr_data_url %}
      <img src="{{ qr_data_url }}" alt="QR" style="width:360px;height:360px;image-rendering:pixelated;margin:16px auto;">
    {% else %}
      <div class="small" style="color:var(--danger);margin:16px 0">
        QR画像を生成できませんでした。<code>pip install qrcode[pil]</code> を実行してください。
      </div>
    {% endif %}

    <div class="small" style="word-break:break-all">{{ menu_url }}</div>

    <div style="margin-top:12px">
      <button class="btn" onclick="window.print()">印刷</button>
      <a class="btn sub" href="{{ url_for('floor') }}">戻る</a>
    </div>
  </div>
{% endif %}

<style>
@media print{
  @page{ margin:8mm; }
  header, nav, footer, .btn{ display:none !important; }
  body{ background:#fff !important; }
  .card{ box-shadow:none !important; border:0 !important; }
}
</style>
{% endblock %}
