{% extends "base.html" %}
{% block content %}
<h2>KDSã‚«ãƒ†ã‚´ãƒª</h2>

<!-- æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
<div style="margin:8px 0 16px;">
  {% if has_endpoint('admin_kds_home') %}
    <a class="btn" href="{{ url_for('admin_kds_home') }}">â† æˆ»ã‚‹</a>
  {% else %}
    <a class="btn" href="javascript:history.back()">â† æˆ»ã‚‹</a>
  {% endif %}
</div>

<!-- è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  -->
<form method="post" style="margin:12px 0; display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
  <input type="hidden" name="act" value="create">
  <input name="name" placeholder="ã‚«ãƒ†ã‚´ãƒªå" required>
  <input name="order" type="number" placeholder="è¡¨ç¤ºé †(æ•°å­—å°ã•ã„é †)" value="0" style="width:160px">
  <button>ï¼‹è¿½åŠ </button>
</form>

<table>
  <thead>
    <tr>
      <th style="width:70px;">ID</th>
      <th>åç§°</th>
      <th style="width:140px;">è¡¨ç¤ºé †</th>
      <th style="width:120px;">æœ‰åŠ¹</th>
      <th style="width:220px;">æ“ä½œ</th>
    </tr>
  </thead>
  <tbody>
    {% for c in cats %}
    <tr>
      <!-- è¡Œå†…ç·¨é›† -->
      <form method="post">
        <input type="hidden" name="act" value="update">
        <input type="hidden" name="id" value="{{ c.id }}">
        <td>{{ c.id }}</td>
        <td><input name="name" value="{{ c.åç§° }}" required style="width:100%;"></td>
        <td><input name="order" type="number" value="{{ c.è¡¨ç¤ºé † }}" style="width:120px;"></td>
        <td>
          <select name="enabled" style="width:110px;">
            <option value="1" {% if c.æœ‰åŠ¹ %}selected{% endif %}>æœ‰åŠ¹</option>
            <option value="0" {% if not c.æœ‰åŠ¹ %}selected{% endif %}>ç„¡åŠ¹</option>
          </select>
        </td>
        <td style="display:flex; gap:8px; align-items:center;">
          <button class="btn">ğŸ’¾ ä¿å­˜</button>
      </form>

      <!-- å‰Šé™¤ -->
      <form method="post" onsubmit="return confirm('ã€Œ{{ c.åç§° }}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');" style="margin:0;">
        <input type="hidden" name="act" value="delete">
        <input type="hidden" name="id" value="{{ c.id }}">
        <button class="btn sub" style="background:#fee2e2; border-color:#fecaca;">ğŸ—‘ å‰Šé™¤</button>
      </form>
        </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
