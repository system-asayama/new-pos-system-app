{% extends "base.html" %}
{% block content %}
<h2>ご来店人数の入力</h2>
<p class="small" style="color:#666">大人・子どもは必須、男女は任意です。</p>

<form method="post" class="card" style="max-width:520px; padding:16px; display:grid; gap:12px;">
  <!-- 必須: 合計人数（大人/子ども） -->
  <div>
    <h3 style="margin:0 0 8px;">人数</h3>

    <label>大人 <span class="small" style="color:#666">（必須）</span></label>
    <div style="display:flex; gap:8px; align-items:center;">
      <button type="button" class="btn sub" onclick="chg('num_adult',-1)">−</button>
      <input id="num_adult" name="num_adult" type="number" min="0" value="{{ init.num_adult or 0 }}" style="width:100px;text-align:center">
      <button type="button" class="btn sub" onclick="chg('num_adult',+1)">＋</button>
    </div>

    <div style="height:8px"></div>

    <label>子ども <span class="small" style="color:#666">（必須）</span></label>
    <div style="display:flex; gap:8px; align-items:center;">
      <button type="button" class="btn sub" onclick="chg('num_child',-1)">−</button>
      <input id="num_child" name="num_child" type="number" min="0" value="{{ init.num_child or 0 }}" style="width:100px;text-align:center">
      <button type="button" class="btn sub" onclick="chg('num_child',+1)">＋</button>
    </div>
  </div>

  <hr>

  <!-- 任意: 内訳（男性/女性） -->
  <div>
    <h3 style="margin:0 0 8px;">（任意）内訳</h3>

    <label>男性</label>
    <div style="display:flex; gap:8px; align-items:center;">
      <button type="button" class="btn sub" onclick="chg('num_male',-1)">−</button>
      <input id="num_male" name="num_male" type="number" min="0" value="{{ init.num_male or 0 }}" style="width:100px;text-align:center">
      <button type="button" class="btn sub" onclick="chg('num_male',+1)">＋</button>
    </div>

    <div style="height:8px"></div>

    <label>女性</label>
    <div style="display:flex; gap:8px; align-items:center;">
      <button type="button" class="btn sub" onclick="chg('num_female',-1)">−</button>
      <input id="num_female" name="num_female" type="number" min="0" value="{{ init.num_female or 0 }}" style="width:100px;text-align:center">
      <button type="button" class="btn sub" onclick="chg('num_female',+1)">＋</button>
    </div>

    <p class="small" style="color:#666; margin-top:8px;">
      ※任意入力です。未入力でも先へ進めます。
    </p>
  </div>

  <button class="btn" type="submit">入力してはじめる（メニューへ）</button>
</form>

<script>
function chg(id, d){
  const el = document.getElementById(id);
  const v = parseInt(el.value || "0", 10);
  const n = Math.max(0, v + d);
  el.value = n;
}
</script>
{% endblock %}
